"use strict";(globalThis.webpackChunkdocusaurus=globalThis.webpackChunkdocusaurus||[]).push([[7660],{4372:e=>{e.exports=JSON.parse('{"permalink":"/2024/02/02/securing-your-aks-cluster-with-a-linux-firewall-vm","editUrl":"https://github.com/appdevgbb/gbb-blog/tree/main/docusaurus/blog/2024-02-02/securing-your-aks-cluster-with-a-linux-firewall-vm/index.md","source":"@site/blog/2024-02-02/securing-your-aks-cluster-with-a-linux-firewall-vm/index.md","title":"Securing your AKS cluster with a Linux Firewall VM","description":"How to configure the firewall VM, the virtual network, and the network security group to route traffic to your AKS endpoints.","date":"2024-02-02T00:00:00.000Z","tags":[],"readingTime":8.36,"hasTruncateMarker":true,"authors":[{"name":"Diego Casati","title":"Principal Cloud Architect, Azure Global Black Belt","url":"https://github.com/dcasati","socials":{"x":"https://x.com/ve6dpc","github":"https://github.com/dcasati"},"imageURL":"https://github.com/dcasati.png","key":"diego_casati","page":null}],"frontMatter":{"authors":["diego_casati"],"date":"2024-02-02","description":"How to configure the firewall VM, the virtual network, and the network security group to route traffic to your AKS endpoints.","tags":[],"title":"Securing your AKS cluster with a Linux Firewall VM"},"unlisted":false,"prevItem":{"title":"Using the Azure Key Vault CSI Driver with Workload Identity","permalink":"/2024/03/05/workload-identity-kv-csi"},"nextItem":{"title":"Using Workload Idenity to Access Azure Blob Storage","permalink":"/2023/12/19/workload-identity-blob-example"}}')},8453:(e,t,r)=>{r.d(t,{R:()=>o,x:()=>u});var i=r(6540);const n={},a=i.createContext(n);function o(e){const t=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function u(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),i.createElement(a.Provider,{value:t},e.children)}},9038:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>u,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>l});var i=r(4372),n=r(4848),a=r(8453);const o={authors:["diego_casati"],date:"2024-02-02",description:"How to configure the firewall VM, the virtual network, and the network security group to route traffic to your AKS endpoints.",tags:[],title:"Securing your AKS cluster with a Linux Firewall VM"},u="Securing your AKS cluster with a Linux Firewall VM",s={authorsImageUrls:[void 0]},l=[];function c(e){const t={a:"a",p:"p",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.p,{children:"A network virtual appliance (NVA) is a virtual machine that performs network functions such as firewalling. In this post, I will walk you through how to use a Linux VM as an NVA in Azure and route traffic to an endpoint running on Azure Kubernetes Service (AKS). I will cover two scenarios: one where the traffic goes through an internal load balancer, and another where the traffic goes directly to a pod."}),"\n",(0,n.jsxs)(t.p,{children:["This assumes you already have a Linux VM and an AKS Cluster created - both in their own VNET. The cluster and the Linux VM need to be VNET peered already. ",(0,n.jsx)(t.a,{href:"https://learn.microsoft.com/en-us/azure/virtual-network/virtual-network-manage-peering?tabs=peering-cli",children:"Here is a quick start on VNET peering if you need a refresher"}),"."]})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}}}]);