"use strict";(globalThis.webpackChunkdocusaurus=globalThis.webpackChunkdocusaurus||[]).push([[8687],{3076:t=>{t.exports=JSON.parse('{"permalink":"/2024/08/15/aks-control-plane-log-filtering","editUrl":"https://github.com/appdevgbb/gbb-blog/tree/main/docusaurus/blog/2024-08-15/aks-control-plane-log-filtering/index.md","source":"@site/blog/2024-08-15/aks-control-plane-log-filtering/index.md","title":"Using Stream Analytics to Filter AKS Control Plane Logs","description":"Using Azure Stream Analytics to filter Kubernetes control plane log data from AKS diagnostics in order to isolate critical data and reduce log retention cost.","date":"2024-08-15T00:00:00.000Z","tags":[],"readingTime":10.14,"hasTruncateMarker":true,"authors":[{"name":"Steve Griffith","title":"Principal Cloud Architect, Azure Global Black Belt","url":"https://github.com/swgriffith","socials":{"x":"https://x.com/SteveGriffith","github":"https://github.com/swgriffith"},"imageURL":"https://github.com/swgriffith.png","key":"steve_griffith","page":null}],"frontMatter":{"authors":["steve_griffith"],"date":"2024-08-15","description":"Using Azure Stream Analytics to filter Kubernetes control plane log data from AKS diagnostics in order to isolate critical data and reduce log retention cost.","tags":[],"title":"Using Stream Analytics to Filter AKS Control Plane Logs"},"unlisted":false,"prevItem":{"title":"Multi-Cluster Layer 4 Load Balancing with Fleet Manager","permalink":"/2024/09/06/multi-cluster-layer-4-load-balancing-with-fleet-manager"},"nextItem":{"title":"Using Project KAITO in AKS","permalink":"/2024/04/16/aks-kaito"}}')},4216:(t,e,o)=>{o.r(e),o.d(e,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>r,metadata:()=>n,toc:()=>c});var n=o(3076),i=o(4848),a=o(8453);const r={authors:["steve_griffith"],date:"2024-08-15",description:"Using Azure Stream Analytics to filter Kubernetes control plane log data from AKS diagnostics in order to isolate critical data and reduce log retention cost.",tags:[],title:"Using Stream Analytics to Filter AKS Control Plane Logs"},s="Filtering AKS Control Plane Logs with Azure Stream Analytics",l={authorsImageUrls:[void 0]},c=[{value:"Introduction",id:"introduction",level:2}];function u(t){const e={a:"a",h2:"h2",p:"p",...(0,a.R)(),...t.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h2,{id:"introduction",children:"Introduction"}),"\n",(0,i.jsxs)(e.p,{children:["While AKS does NOT provide access to the cluster's managed control plane, it does provide access to the control plane component logs via ",(0,i.jsx)(e.a,{href:"https://learn.microsoft.com/en-us/azure/aks/monitor-aks#aks-control-planeresource-logs",children:"diagnostic settings"}),". The easiest option to persist and search this data is to send it directly to Azure Log Analytics, however there is a LOT of data in those logs, which makes it cost prohibitive in Log Analytics. Alternatively, you can send all the data to an Azure Storage Account, but then searching and alerting can be challenging."]}),"\n",(0,i.jsx)(e.p,{children:"To address the above challenge, one option is to stream the data to Azure Event Hub, which then gives you the option to use Azure Stream Analytics to filter out events that you deem important and then just store the rest in cheaper storage (ex. Azure Storage) for potential future diagnostic needs."})]})}function d(t={}){const{wrapper:e}={...(0,a.R)(),...t.components};return e?(0,i.jsx)(e,{...t,children:(0,i.jsx)(u,{...t})}):u(t)}},8453:(t,e,o)=>{o.d(e,{R:()=>r,x:()=>s});var n=o(6540);const i={},a=n.createContext(i);function r(t){const e=n.useContext(a);return n.useMemo(function(){return"function"==typeof t?t(e):{...e,...t}},[e,t])}function s(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(i):t.components||i:r(t.components),n.createElement(a.Provider,{value:e},t.children)}}}]);