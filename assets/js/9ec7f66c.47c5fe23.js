"use strict";(globalThis.webpackChunkdocusaurus=globalThis.webpackChunkdocusaurus||[]).push([[8754],{650:t=>{t.exports=JSON.parse('{"permalink":"/2023/11/27/capabilities-in-aks","editUrl":"https://github.com/appdevgbb/gbb-blog/tree/main/docusaurus/blog/2023-11-27/capabilities-in-aks/index.md","source":"@site/blog/2023-11-27/capabilities-in-aks/index.md","title":"Using Linux Capabilities in AKS","description":"An exploration on how to use Linux capabilities(7) in AKS.","date":"2023-11-27T00:00:00.000Z","tags":[],"readingTime":2.22,"hasTruncateMarker":true,"authors":[{"name":"Diego Casati","title":"Principal Cloud Architect, Azure Global Black Belt","url":"https://github.com/dcasati","socials":{"x":"https://x.com/ve6dpc","github":"https://github.com/dcasati"},"imageURL":"https://github.com/dcasati.png","key":"diego_casati","page":null}],"frontMatter":{"authors":["diego_casati"],"date":"2023-11-27","description":"An exploration on how to use Linux capabilities(7) in AKS.","tags":[],"title":"Using Linux Capabilities in AKS"},"unlisted":false,"prevItem":{"title":"Using External DNS in AKS with Azure Workload Identity","permalink":"/2023/12/18/external-dns-workload-identity"},"nextItem":{"title":"Image Verification Part 1 - Notation CLI","permalink":"/2023/11/09/part1-notation-usage"}}')},906:(t,e,i)=>{i.r(e),i.d(e,{assets:()=>c,contentTitle:()=>r,default:()=>d,frontMatter:()=>s,metadata:()=>n,toc:()=>l});var n=i(650),a=i(4848),o=i(8453);const s={authors:["diego_casati"],date:"2023-11-27",description:"An exploration on how to use Linux capabilities(7) in AKS.",tags:[],title:"Using Linux Capabilities in AKS"},r="Using capabilities in AKS",c={authorsImageUrls:[void 0]},l=[{value:"Introduction",id:"introduction",level:2}];function u(t){const e={a:"a",code:"code",h2:"h2",p:"p",...(0,o.R)(),...t.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.h2,{id:"introduction",children:"Introduction"}),"\n",(0,a.jsxs)(e.p,{children:["Right after Kubernetes 1.21, the way ",(0,a.jsx)(e.a,{href:"https://man7.org/linux/man-pages/man7/capabilities.7.html",children:"Capabilities(7)"})," worked in Kubernetes changed. At that version, a change in the upstream code enforced that Capabilities will only work when ",(0,a.jsx)(e.code,{children:"runAsUser"})," is set to ",(0,a.jsx)(e.code,{children:"0"})," - meaning ",(0,a.jsx)(e.code,{children:"root"}),". This is somewhat counterintuitive to what most of us would expect but code goes into the reasoning and how to work with Capabilities after 1.21."]})]})}function d(t={}){const{wrapper:e}={...(0,o.R)(),...t.components};return e?(0,a.jsx)(e,{...t,children:(0,a.jsx)(u,{...t})}):u(t)}},8453:(t,e,i)=>{i.d(e,{R:()=>s,x:()=>r});var n=i(6540);const a={},o=n.createContext(a);function s(t){const e=n.useContext(o);return n.useMemo(function(){return"function"==typeof t?t(e):{...e,...t}},[e,t])}function r(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(a):t.components||a:s(t.components),n.createElement(o.Provider,{value:e},t.children)}}}]);